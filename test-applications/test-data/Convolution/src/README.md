# Корреляционная свертка сейсмотрасс
**corr.cpp** - адаптированный код корреляционной свертки сейсмотрасс под Windows и Linux

Компиляция и запуск:
```
g++ corr.cpp -o corr.exe
./corr.exe corr.txt opora.dat 300
```
Пример вывода:
```
Processing:
16_11011500.U8831Vk00 - OK      A=19.64 SNR=28.8
processing time: 27.905
```
Описание запуска программмы из кода:
```
╔══════════════════════════════════════════════════════╗
║ CORR - корреляционная свертка сейсмотрасс 2010г.     ║
║                                                      ║
║ Вызов: corr.exe filename1 filename2 T                ║
║ Вызов через меню Far: path\\corr.exe !@! filename2 T ║
║                                                      ║
║ filename1 - текстовый файл со списком сейсмотрасс    ║
║ в формате РС-A                                       ║
║ filename2 - файл опорного сигнала в формате РС-A     ║
║ T - интервал корреляции в секундах                   ║
║                                                      ║
║ Файлы результата записываются в поддиректорию _corr  ║
║ Отчет о работе выводится на экран и в файл corr.log  ║
║ В отчете для полученных коррелотрасс приводится      ║
║ отношение сигнал/шум (SNR) и эквивалентная           ║
║ амплитуда сигнала (A) в дискретах АЦП.               ║
╚══════════════════════════════════════════════════════╝
```
Папка **sources** - исходники программы. В ней **corr2.cpp** - исходная версия корреляционной свертки, которая компилируется только под Windows. К ней был приложен следующий комментарий (описание программы):


> Корреляционная свертка прямым методом, т.е. путем сдвига опорного сигнала относительно сворачиваемого и их перемножения.
Все это делается в цикле (строка 116 текста программа). Есть вариант свертки путем FFT опоры и сигнала, их перемножения и обратного FFT (закомментированная строка 115). Этот вариант быстрее, но для современных компов разница небольшая. 
Самописанные функции FFT и обратного FTT не привожу, в Питоне они есть готовые. 
Имеет смысл сделать на Питоне прямую свертку, а затем через FFT и сравнить результат.
Программа писалась лет 20 назад, поэтому комментировать текст сейчас тяжело. Надеюсь, разберетесь и так ;)
